(()=>{const q=(s,c=document)=>c.querySelector(s),qa=(s,c=document)=>Array.from(c.querySelectorAll(s));function closeDropdowns(ex){qa('.dropdown-menu.show').forEach(m=>{if(ex&& (m===ex||m.contains(ex)||ex.contains(m)))return;m.classList.remove('show')})}document.addEventListener('click',e=>{const t=e.target.closest('[data-bs-toggle="dropdown"]');if(t){e.preventDefault();const m=t.parentElement?.querySelector('.dropdown-menu');if(!m)return;const open=m.classList.contains('show');closeDropdowns();if(!open)m.classList.add('show');return}if(!e.target.closest('.dropdown'))closeDropdowns()});const backdrops=new Map();function showModal(modal){if(!modal)return;modal.classList.add('show');modal.style.display='block';modal.setAttribute('aria-modal','true');modal.removeAttribute('aria-hidden');const bd=document.createElement('div');bd.className='modal-backdrop show';document.body.appendChild(bd);document.body.classList.add('modal-open');backdrops.set(modal,bd)}function hideModal(modal){if(!modal)return;modal.classList.remove('show');modal.style.display='none';modal.setAttribute('aria-hidden','true');modal.removeAttribute('aria-modal');const bd=backdrops.get(modal);if(bd)bd.remove();backdrops.delete(modal);if(backdrops.size===0)document.body.classList.remove('modal-open')}document.addEventListener('click',e=>{const openBtn=e.target.closest('[data-bs-toggle="modal"]');if(openBtn){e.preventDefault();showModal(q(openBtn.getAttribute('data-bs-target')))}const closeBtn=e.target.closest('[data-bs-dismiss="modal"]');if(closeBtn){e.preventDefault();hideModal(closeBtn.closest('.modal'))}if(e.target.classList.contains('modal'))hideModal(e.target)});document.addEventListener('keydown',e=>{if(e.key==='Escape'){qa('.modal.show').forEach(hideModal);closeDropdowns()}});window.bootstrap={Modal:{getOrCreateInstance:(el)=>({show:()=>showModal(el),hide:()=>hideModal(el)})}}})();
