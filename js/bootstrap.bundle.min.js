(()=>{"use strict";const m=new WeakMap,t=new WeakMap,d=new WeakMap,b='show';const q=(s,r=document)=>r.querySelector(s),qa=(s,r=document)=>Array.from(r.querySelectorAll(s));class Modal{constructor(e,o={}){this._el=e;this._opts=o;this._backdrop=null;m.set(e,this);this._onEsc=i=>{if(i.key==='Escape'&&this._opts.keyboard!==false)this.hide()};e.addEventListener('click',i=>{if(i.target.closest('[data-bs-dismiss="modal"]'))this.hide()})}show(){this._el.style.display='block';this._el.removeAttribute('aria-hidden');this._el.setAttribute('aria-modal','true');this._el.classList.add(b);document.body.classList.add('modal-open');this._backdrop=document.createElement('div');this._backdrop.className='modal-backdrop fade show';document.body.appendChild(this._backdrop);document.addEventListener('keydown',this._onEsc)}hide(){this._el.classList.remove(b);this._el.style.display='none';this._el.setAttribute('aria-hidden','true');document.body.classList.remove('modal-open');if(this._backdrop){this._backdrop.remove();this._backdrop=null}document.removeEventListener('keydown',this._onEsc)}static getInstance(e){return m.get(e)||null}}class Tooltip{constructor(e,o={}){this._el=e;this._opts=o;this._tip=null;t.set(e,this);if(o.trigger!=='manual'){e.addEventListener('mouseenter',()=>this.show());e.addEventListener('mouseleave',()=>this.hide())}}setContent(c){const v=c&&c['.tooltip-inner'];if(v!=null)this._el.setAttribute('data-tooltip-content',v)}_resolveElement(v,f=document.body){if(!v)return f;if(v===document.body||v===document.documentElement||v instanceof Element)return v;if(typeof v==='string')return q(v)||f;return f}_normalizeOffset(){const o=this._opts.offset;if(Array.isArray(o)){const x=Number(o[0])||0,y=Number(o[1])||0;return{x,y}}if(typeof o==='number')return{x:0,y:o};if(typeof o==='string'){const p=o.split(',').map(n=>Number(n.trim()));if(p.length>=2&&!Number.isNaN(p[0])&&!Number.isNaN(p[1]))return{x:p[0],y:p[1]}}return{x:0,y:8}}_getStrategy(){const c=typeof this._opts.popperConfig==='function'?this._opts.popperConfig({}):this._opts.popperConfig;return c&&c.strategy?c.strategy:this._opts.strategy||'absolute'}_getPlacement(){const p=this._opts.placement||this._el.getAttribute('data-bs-placement')||'top';return String(p).toLowerCase()}_getBoundaryRect(){const b=this._resolveElement(this._opts.boundary,document.body);if(b===document.body||b===document.documentElement)return{left:8,top:8,right:window.innerWidth-8,bottom:window.innerHeight-8,width:Math.max(0,window.innerWidth-16),height:Math.max(0,window.innerHeight-16)};const r=b.getBoundingClientRect();return{left:r.left+8,top:r.top+8,right:r.right-8,bottom:r.bottom-8,width:Math.max(0,r.width-16),height:Math.max(0,r.height-16)}}_calcPosition(r,tr,p,o){let l=r.left+r.width/2-tr.width/2+o.x,top=r.top-tr.height-o.y;if(p.startsWith('bottom'))top=r.bottom+o.y;else if(p.startsWith('left')){l=r.left-tr.width-o.x;top=r.top+r.height/2-tr.height/2+o.y}else if(p.startsWith('right')){l=r.right+o.x;top=r.top+r.height/2-tr.height/2+o.y}if(p.endsWith('start')){if(p.startsWith('top')||p.startsWith('bottom'))l=r.left+o.x;else top=r.top+o.y}else if(p.endsWith('end')){if(p.startsWith('top')||p.startsWith('bottom'))l=r.right-tr.width+o.x;else top=r.bottom-tr.height+o.y}return{left:l,top}}_applyPosition(pos,strat,c){if(strat==='fixed'){this._tip.style.left=`${pos.left}px`;this._tip.style.top=`${pos.top}px`;return}const cr=c.getBoundingClientRect();const l=pos.left-cr.left+c.scrollLeft;const top=pos.top-cr.top+c.scrollTop;this._tip.style.left=`${l}px`;this._tip.style.top=`${top}px`}show(){if(this._tip)return;const txt=this._el.getAttribute('data-tooltip-content')||this._el.getAttribute('title');if(!txt)return;this._tip=document.createElement('div');const p=this._getPlacement();this._tip.className=`tooltip bs-tooltip-${p.split('-')[0]} show`;this._tip.setAttribute('role','tooltip');this._tip.innerHTML=`<div class="tooltip-arrow"></div><div class="tooltip-inner"></div>`;this._tip.querySelector('.tooltip-inner').textContent=txt;const c=this._resolveElement(this._opts.container,document.body);const strat=this._getStrategy();if(strat==='absolute'&&c!==document.body&&c!==document.documentElement&&getComputedStyle(c).position==='static')c.style.position='relative';c.appendChild(this._tip);this._tip.style.position=strat;const r=this._el.getBoundingClientRect(),tr=this._tip.getBoundingClientRect();const o=this._normalizeOffset();const bnd=this._getBoundaryRect();const pos=this._calcPosition(r,tr,p,o);pos.left=Math.min(Math.max(pos.left,bnd.left),Math.max(bnd.left,bnd.right-tr.width));pos.top=Math.min(Math.max(pos.top,bnd.top),Math.max(bnd.top,bnd.bottom-tr.height));this._applyPosition(pos,strat,c)}hide(){if(this._tip){this._tip.remove();this._tip=null}}dispose(){this.hide();t.delete(this._el)}static getInstance(e){return t.get(e)||null}}class Dropdown{constructor(e){this._btn=e;this._menu=e.nextElementSibling;d.set(e,this);e.addEventListener('click',i=>{i.preventDefault();i.stopPropagation();this.toggle()})}toggle(){if(!this._menu)return;const s=this._menu.classList.toggle(b);this._btn.setAttribute('aria-expanded',String(s))}hide(){if(this._menu){this._menu.classList.remove(b);this._btn.setAttribute('aria-expanded','false')}}static getInstance(e){return d.get(e)||null}}class Tab{constructor(e){this._el=e}show(){const p=this._el.closest('[role="tablist"],.nav');if(!p)return;qa('[data-bs-toggle="tab"],[data-bs-toggle="pill"]',p).forEach(t=>{t.classList.remove('active');t.setAttribute('aria-selected','false');const pane=q(t.getAttribute('data-bs-target'));if(pane){pane.classList.remove('show','active')}});this._el.classList.add('active');this._el.setAttribute('aria-selected','true');const pane=q(this._el.getAttribute('data-bs-target'));if(pane)pane.classList.add('show','active')}}document.addEventListener('click',e=>{const tgl=e.target.closest('[data-bs-toggle="modal"]');if(tgl){e.preventDefault();const x=q(tgl.getAttribute('data-bs-target'));if(x)(Modal.getInstance(x)||new Modal(x)).show();return}const dd=e.target.closest('[data-bs-toggle="dropdown"]');if(dd){(Dropdown.getInstance(dd)||new Dropdown(dd)).toggle();return}const tab=e.target.closest('[data-bs-toggle="tab"],[data-bs-toggle="pill"]');if(tab){e.preventDefault();new Tab(tab).show();return}if(!e.target.closest('.dropdown-menu'))qa('[data-bs-toggle="dropdown"]').forEach(btn=>{const i=Dropdown.getInstance(btn);if(i)i.hide()})});window.bootstrap={Modal,Tooltip,Dropdown,Tab};})();
